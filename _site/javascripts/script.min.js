/**
 * yahoo-cadence - v1.0.0
 * 2013-06-20
 * http://yahoo.tumblr.com/
 *
 * Copyright 2013 Style Hatch
 */
$(function(){function t(t){return t in document.documentElement.style}function e(){$blogs=$("nav.property-blogs");var t=$blogs.clone().appendTo("div.dropdown");t.find("h4").remove()}function i(){700>=$(window).width()?(u.addClass("minimized"),d.attr("style","")):(u.removeClass("minimized"),d.attr("style",""))}function a(t){var e=$(".posts");StyleHatch.isotope&&StyleHatch.indexPage&&e.imagesLoaded(function(){e.isotope({masonry:{columnWidth:t,gutterWidth:40},transformsEnabled:StyleHatch.transformsEnabled})})}function o(){var t=$(".posts");StyleHatch.isotope&&t.find("article").hasClass("isotope-item")&&t.isotope("destroy")}function s(){windowWidth=$(window).width(),windowWidth>y?"large"!==StyleHatch.querySize&&(StyleHatch.querySize="large",a(436),$("article.photo").each(function(){$(this).swapHighRes()})):y>=windowWidth&&windowWidth>g?"default"!==StyleHatch.querySize&&(StyleHatch.querySize="default",o(),$("article.photo").each(function(){$(this).swapHighRes()})):g>=windowWidth&&windowWidth>v?"percentage"!==StyleHatch.querySize&&(StyleHatch.querySize="percentage",o(),$("article.photo").each(function(){$(this).swapHighRes()})):v>=windowWidth&&"mobile"!==StyleHatch.querySize&&(StyleHatch.querySize="mobile",o(),$("article.photo").each(function(){$(this).swapHighRes()}))}if(!StyleHatch.customizeMode){$.getScript("http://platform.twitter.com/widgets.js");var n=document.createElement("script");n.type="text/javascript",n.async=!0,n.src="https://apis.google.com/js/plusone.js";var r=document.getElementsByTagName("script")[0];r.parentNode.insertBefore(n,r)}if($(".tumblr_video_container").remove(),StyleHatch.iOS=0!==navigator.platform.indexOf("iPhone")&&0!==navigator.platform.indexOf("iPad")&&0!==navigator.platform.indexOf("iPod")?!1:!0,StyleHatch.isFirefox=t("MozBoxSizing"),e(),$.fn.swapHighRes=function(){var t=$(this),e=t,i=t.find("header img");if(i.attr("data-highres-swap"))return!0;var a=e.width();a>500&&i.attr("data-highres")&&(i.attr("src",i.attr("data-highres")),i.attr("data-highres-swap",!0))},$.fn.setupTumblrShare=function(){return this.each(function(){var t=$(this);if(t.is(":empty")){var e=t.closest("article"),i=e.attr("data-permalink"),a=e.find("header img, section img").not(".avatar, .icon");if(a.length>0){var o=!0;if(a.first().attr("data-highres"))var s=a.first().attr("data-highres");else var s=a.first().attr("src")}else var o=!1,s="";if(StyleHatch.twitterUser)var n=StyleHatch.twitterUser;else var n="";t.tumblrShare({url:i,media:s,via:n,size:"horizontal",pinterest:o,onComplete:function(){try{gapi.plusone.go()}catch(t){}$.getScript("http://platform.twitter.com/widgets.js"),$.getScript("http://assets.pinterest.com/js/pinit.js")}})}})},$.fn.initArticle=function(){return $("article"),this.each(function(){var t=$(this);if(t.is(".photo")&&(t.swapHighRes(),t.find("a.highres").colorbox({photo:!0,maxHeight:"90%",maxWidth:"90%"})),t.is(".text, .photo, .photoset, .link, .quote, .video, .ask")&&t.fitVids(),t.is(".audio"))if(StyleHatch.iOS){var e=t.find("header").width();$("iframe.tumblr_audio_player").width(e)}else $("iframe.tumblr_audio_player").addClass("fit-player");if(t.is(".photoset")){var i=t.find(".photoset-grid");i.photosetGrid({layout:i.attr("data-photoset-layout"),width:"100%",gutter:"2px",highresLinks:!0,lowresWidth:500,rel:i.attr("data-photoset-id"),onInit:function(){},onComplete:function(){i.removeClass("invisible"),i.find("a").colorbox({photo:!0,maxHeight:"90%",maxWidth:"90%",title:function(){var t=$(this).find("img").attr("alt");$(this).attr("title",t)}})}})}var a=t.find(".tumblr-action li.reblog a").attr("href"),o=t.attr("data-postID");t.find(".tumblr-action li.like").attr("data-reblog",a),t.find(".tumblr-action li.like").attr("data-postID",o),t.find(".tumblr-action li.like a").click(function(t){t.preventDefault(),0==$("#tumblr-like-frame").length&&$("body").append('<iframe id="tumblr-like-frame" style="display:none;"></iframe>');var e=$("#tumblr-like-frame"),i=$(this).hasClass("tliked"),a=i?"unlike":"like",o=$(this).parent().attr("data-postID"),s=$(this).parent().attr("data-reblog"),n=s.slice(-8),r="http://www.tumblr.com/"+a+"/"+n+"?id="+o;i?$(this).removeClass("tliked"):$(this).addClass("tliked"),e.attr("src",r)})})},$("article").initArticle(),!StyleHatch.indexPage){var l=$(this).find(".share-buttons");l.setupTumblrShare()}if($.fn.initArticleEvents=function(){return $(this),this.each(function(){var t=$(this);t.is(".photo")&&t.find("section").mouseenter(function(){$(this).find(".highres").show()}).mouseleave(function(){$(this).find(".highres").hide()})})},$("article").initArticleEvents(),$("a.logo-sm").click(function(t){$(this).parent().hasClass("minimized")&&(t.preventDefault(),$(this).parent().find(".dropdown").toggle())}),StyleHatch.fillSite&&StyleHatch.siteBackground&&$.backstretch(StyleHatch.siteBackground),1==StyleHatch.navBar){var c=$("nav.primary"),h=$("div.outer-nav"),d=$("div.dropdown");c.addClass("unlocked"),d.attr("style","");var m,f=!1;$(window).scroll(function(){f=!0}),setInterval(function(){if(f)if(f=!1,!m&&0>=c.offset().top-$(this).scrollTop()){$("#main").css({"margin-top":c.outerHeight()}),c.addClass("locked"),c.removeClass("unlocked"),h.addClass("locked");var t="68px";StyleHatch.iOS&&(t="60px"),$("html body iframe#tumblr_controls.tumblr_sticky_iframe, html body iframe#tumblr_controls").css({top:t,"z-index":500}),m=!0}else m&&$(this).scrollTop()<=$("header.top").outerHeight()&&(c.removeClass("locked"),c.addClass("unlocked"),h.removeClass("locked"),d.attr("style",""),$("#main").css({"margin-top":0}),$("html body iframe#tumblr_controls.tumblr_sticky_iframe, html body iframe#tumblr_controls").css({top:"0px","z-index":500}),m=!1)},5)}var u=$("div.contain"),d=$("div.dropdown");i(),jQuery.resize.delay=50,$("nav.primary").bind("resize",function(){i()}),StyleHatch.isotope&&$("body.index-page article").bind("resize",function(){var t=$(".posts");t.find("article").hasClass("isotope-item")&&t.isotope("reLayout")}),$.Isotope.prototype._getMasonryGutterColumns=function(){var t=this.options.masonry&&this.options.masonry.gutterWidth||0;containerWidth=this.element.width(),this.masonry.columnWidth=this.options.masonry&&this.options.masonry.columnWidth||this.$filteredAtoms.outerWidth(!0)||containerWidth,this.masonry.columnWidth+=t,this.masonry.cols=Math.floor((containerWidth+t)/this.masonry.columnWidth),this.masonry.cols=Math.max(this.masonry.cols,1)},$.Isotope.prototype._masonryReset=function(){this.masonry={},this._getMasonryGutterColumns();var t=this.masonry.cols;for(this.masonry.colYs=[];t--;)this.masonry.colYs.push(0)},$.Isotope.prototype._masonryResizeChanged=function(){var t=this.masonry.cols;return this._getMasonryGutterColumns(),this.masonry.cols!==t},StyleHatch.transformsEnabled=StyleHatch.isFirefox?!1:!0;var p=$("footer.extras");p.fitVids();var y=1120,g=920,v=524;StyleHatch.querySize,s(),$(window).bind("resize",function(){s()}),!StyleHatch.infiniteScroll||!StyleHatch.indexPage||$("html").hasClass("ie6")||$("html").hasClass("ie7")||$("html").hasClass("ie7")||($("#infinite").addClass("show"),$(".posts").infinitescroll({navSelector:"#infinite",nextSelector:"#infinite a",itemSelector:".posts article",bufferPx:400,debug:!1,errorCallback:function(){$("#infinite a").html(StyleHatch.noMoreText),$("#infinite").delay(1e3).slideUp(300),setTimeout(function(){$("#infinite").removeClass("show")},1300)}},function(t){if($(".posts").hasClass("isotope")&&($(t).css({visibility:"hidden"}),$(t).removeClass("featured")),$(t).initArticle(),$(t).initArticleEvents(),$(".posts").hasClass("isotope")&&$(t).imagesLoaded(function(){$(".posts").isotope("appended",$(t)),$(t).css({visibility:"visible"})}),StyleHatch.disqusID){var e=StyleHatch.disqusID;(function(){var t=document.createElement("script");t.async=!0,t.type="text/javascript",t.src="http://"+e+".disqus.com/count.js",(document.getElementsByTagName("HEAD")[0]||document.getElementsByTagName("BODY")[0]).appendChild(t)})()}}),$("#infinite-spin").hide(),$(".posts").infinitescroll("pause"),$("#infinite a").click(function(t){t.preventDefault(),$("#infinite-spin").show(),$(".posts").infinitescroll("retrieve"),$(".posts").infinitescroll("resume")}));var w=1;$("footer.extras .follows li:gt(27)").hide(),$("footer.extras .follows li:lt(28)").each(function(){var t=$(this),e=t.find("a").attr("data-icon");t.find("a").append("<img src='"+e+"' height='24' width='24'>")}),showMoreFollows=function(){w++,$("footer.extras .follows li").each(function(){var t=$(this),e=t.find("a").attr("data-icon");t.show(),t.find("a").is(":empty")&&t.find("a").append("<img src='"+e+"' height='24' width='24'>")}),$("footer.extras .follows .btn").hide()},$("footer.extras .follows a.btn").click(function(){return showMoreFollows(),!1});var S={lines:7,length:2,width:4,radius:6,corners:1,rotate:0,color:StyleHatch.textColor,speed:1.6,trail:60,shadow:!1,hwaccel:!1,className:"spinner",zIndex:2e9,top:"auto",left:"auto"},b=document.getElementById("infinite-spin");if(new Spinner(S).spin(b),$("section.tweets")){var H;H=setInterval(function(){$("section.tweets iframe.twitter-timeline").height()>1&&(p.is(".isotope")&&p.isotope("reLayout"),clearInterval(H))},100)}if(StyleHatch.instagramCount=6,StyleHatch.instagramToken){var x=$("section.instagram");$.ajax({url:"https://api.instagram.com/v1/users/self/media/recent/?access_token="+StyleHatch.instagramToken+"&count="+StyleHatch.instagramCount,dataType:"jsonp",timeout:5e3,success:function(t){x.find("ul").empty();for(var e=0;StyleHatch.instagramCount>e;e++)$("section.instagram ul").append('<li><a href="'+t.data[e].link+'" target="_blank"><img src="'+t.data[e].images.low_resolution.url+'" /></a></li>');var i="http://instagram.com/"+t.data[0].user.username;x.find("a.btn").attr("href",i),x.imagesLoaded(function(){p.is(".isotope")&&p.isotope("reLayout")})}})}});